import{r as t,c as i,h as d,a as n}from"./p-7e0bcafd.js";import{s as a,g as s}from"./p-e40215b8.js";import{g as e}from"./p-580e945a.js";import{t as o}from"./p-4c3ba8bb.js";import{B as p}from"./p-744d17a3.js";import{g as u}from"./p-2a7439a1.js";import"./p-3e8ff66b.js";import"./p-ddbac711.js";const r="spx-edit-button";let x=class{constructor(d){t(this,d),this.spxEditButtonDidLoad=i(this,"spxEditButtonDidLoad",7),this.spxEditButtonDiscard=i(this,"spxEditButtonDiscard",7),this.spxEditButtonSave=i(this,"spxEditButtonSave",7),this.loading=!1,this.test=!1,this.background="var(--spx-color-gray-900)",this.backgroundDiscard="var(--spx-color-gray-600)",this.bottom="1em",this.border="none",this.borderDiscard="none",this.borderRadius="var(--spx-border-radius)",this.color="#ffffff",this.colorDiscard="#ffffff",this.fontSize="var(--spx-font-size)",this.fontSizeMax=1.2,this.fontSizeMin=1,this.gap="0.4em",this.loaderColor="#ffffff",this.loaderGap="0.5em",this.open=!1,this.padding="1em 1.2em",this.paddingXMin=1,this.paddingXMax=1.4,this.paddingYMin=.7,this.paddingYMax=1.2,this.position="fixed",this.right="1em",this.styling="default",this.textDiscard="Discard",this.textEdit="Edit site",this.textSave="Save",this.zIndex=99,this.checkForSlots=()=>{this.el.querySelector('[slot="edit"]')&&(this.editCustom=!0),this.el.querySelector('[slot="discard"]')&&(this.discardCustom=!0),this.el.querySelector('[slot="save"]')&&(this.saveCustom=!0)},this.clickEdit=()=>{this.open=!0,(this.editId?u(this.el).querySelectorAll("[data-spx-edit][data-spx-edit-id="+this.editId+"]"):u(this.el).querySelectorAll("[data-spx-edit]")).forEach((t=>{const i=document.createElement("spx-edit"),d=t.getAttribute("data-spx-edit"),n=t.getAttribute("data-spx-edit-type"),a=t.hasAttribute("data-spx-edit-subfield"),s=t.innerHTML;d&&i.setAttribute("name",d),n&&i.setAttribute("type",n),a&&i.setAttribute("subfield",""),i.setAttribute("text",s),i.setAttribute("editable",""),t.innerHTML="",t.appendChild(i)}))},this.clickDiscard=()=>{this.open=!1,this.spxEditButtonDiscard.emit({target:"document"})},this.clickSave=()=>{this.loading=!0;const t=()=>{this.spxEditButtonSave.emit({target:"document"}),this.open=!1,this.loading=!1};this.test?t():fetch(spx.ajax,{method:"POST",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:"action=spxEditButtonAjaxHandler"+(()=>{const t=Math.random().toString(36).substr(2,9),i=[];return document.querySelectorAll("spx-edit").forEach((d=>{const n=d.getAttribute("body-string").replace("&","").replace("=",t),a=encodeURIComponent(n);i.push(("&"+a).replace(t,"="))})),i.toString().replace(/,&/g,"&")})()+"&post_id="+spx.postId+"&nonce="+spx.nonce}).then((i=>{200===i.status?t():500===i.status&&(this.loading=!1)}))}}attributesChanged(t,i,d){a(this.el,r,d,t)}componentWillLoad(){this.checkForSlots()}componentDidLoad(){s({el:this.el,tag:r,props:["background","backgroundDiscard","border","borderDiscard","borderRadius","bottom","color","colorDiscard","fontSize","fontSizeMin","fontSizeMax","gap","left","loaderColor","loaderGap","padding","paddingXMax","paddingXMin","paddingYMax","paddingYMin","position","right","top","zIndex"],cb:this.checkForSlots}),this.spxEditButtonDidLoad.emit({target:"document"})}componentWillUpdate(){e(this.el)}async discard(){this.clickDiscard()}async edit(){this.clickEdit()}async save(){this.clickSave()}render(){var t,i,n,a;const{tw:s}=o(this.el.shadowRoot,"headless"===this.styling),e="headless"===this.styling&&s(null!==(t=this.classButton)&&void 0!==t?t:""),u="headless"===this.styling&&s((null!==(i=this.classButton)&&void 0!==i?i:"")+" "+(null!==(n=this.classButtonDiscard)&&void 0!==n?n:"")),r="headless"===this.styling&&s(null!==(a=this.classLoader)&&void 0!==a?a:"");return d("div",{class:"inner"},this.open?[d(p,{as:"button",onClick:this.clickDiscard,class:"headless"===this.styling?u:"button button--discard"},this.discardCustom?d("slot",{name:"discard"}):this.textDiscard),d(p,{as:"button",onClick:this.clickSave,class:"headless"===this.styling?e:"button"},this.loading&&!this.saveCustom&&d("spx-icon",{class:"headless"===this.styling?r:"loader",type:"loader"}),this.saveCustom?d("slot",{name:"save"}):this.textSave)]:d(p,{as:"button",onClick:this.clickEdit,class:"headless"===this.styling?e:"button"},this.editCustom?d("slot",{name:"edit"}):this.textEdit))}get el(){return n(this)}static get watchers(){return{background:["attributesChanged"],backgroundDiscard:["attributesChanged"],border:["attributesChanged"],borderDiscard:["attributesChanged"],borderRadius:["attributesChanged"],bottom:["attributesChanged"],color:["attributesChanged"],colorDiscard:["attributesChanged"],fontSize:["attributesChanged"],fontSizeMin:["attributesChanged"],fontSizeMax:["attributesChanged"],gap:["attributesChanged"],left:["attributesChanged"],loaderColor:["attributesChanged"],loaderGap:["attributesChanged"],padding:["attributesChanged"],paddingXMax:["attributesChanged"],paddingXMin:["attributesChanged"],paddingYMax:["attributesChanged"],paddingYMin:["attributesChanged"],position:["attributesChanged"],right:["attributesChanged"],top:["attributesChanged"],zIndex:["attributesChanged"]}}};x.style=":host{display:var(--spx-edit-button-display, block)}.inner{display:grid;grid-gap:var(--spx-edit-button-gap, 0.4em);position:var(--spx-edit-button-position, absolute);z-index:var(--spx-edit-button-z-index, 99);top:var(--spx-edit-button-top, none);right:var(--spx-edit-button-right, 1em);bottom:var(--spx-edit-button-right, 1em);left:var(--spx-edit-button-left, none)}:host([styling=default]) .inner{font-size:var(--spx-edit-button-font-size, var(--spx-font-size))}:host([styling=fluid]) .inner{--spx-edit-button-font-size-fluid-min:var(--spx-edit-button-font-size-min, 1);--spx-edit-button-font-size-fluid-max:var(--spx-edit-button-font-size-max, 1.2);--spx-edit-button-font-size-fluid-min-w-px:calc(\n    var(--spx-fluid-min-w) / var(--spx-fluid-base)\n  );--spx-edit-button-font-size-fluid-max-w-px:calc(\n    var(--spx-fluid-max-w) / var(--spx-fluid-base)\n  );--spx-edit-button-font-size-fluid-slope:calc(\n    (\n        var(--spx-edit-button-font-size-fluid-max) -\n          var(--spx-edit-button-font-size-fluid-min)\n      ) /\n      (\n        var(--spx-edit-button-font-size-fluid-max-w-px) -\n          var(--spx-edit-button-font-size-fluid-min-w-px)\n      )\n  );--spx-edit-button-font-size-fluid-y-axis:calc(\n    (\n        (var(--spx-edit-button-font-size-fluid-min-w-px) * -1) *\n          var(--spx-edit-button-font-size-fluid-slope)\n      ) + var(--spx-edit-button-font-size-fluid-min)\n  );font-size:clamp(var(--spx-edit-button-font-size-fluid-min) * 1rem, var(--spx-edit-button-font-size-fluid-y-axis) * 1rem + var(--spx-edit-button-font-size-fluid-slope) * 100vw, var(--spx-edit-button-font-size-fluid-max) * 1rem)}.button{--spx-icon-color:var(--spx-edit-button-loader-color, #ffffff);font-family:var(--spx-font-family);display:flex;justify-content:center;align-items:center;text-align:center;cursor:pointer;font-size:1em;color:var(--spx-edit-button-color, #ffffff);background:var(--spx-edit-button-background, var(--spx-color-gray-900));border:var(--spx-edit-button-border, none);border-radius:var(--spx-edit-button-border-radius, var(--spx-border-radius));transition-property:box-shadow;transition-duration:var(--spx-transition-duration);transition-timing-function:var(--spx-transition-timing-function);transition-property:background, box-shadow}:host([styling=default]) .button{padding-left:var(--spx-edit-button-padding-x, 1em 1.2em)}:host([styling=fluid]) .button{--spx-edit-button-padding-x-fluid-min:var(--spx-edit-button-padding-x-min, 1);--spx-edit-button-padding-x-fluid-max:var(--spx-edit-button-padding-x-max, 1.4);--spx-edit-button-padding-x-fluid-min-w-px:calc(\n    var(--spx-fluid-min-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-x-fluid-max-w-px:calc(\n    var(--spx-fluid-max-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-x-fluid-slope:calc(\n    (\n        var(--spx-edit-button-padding-x-fluid-max) -\n          var(--spx-edit-button-padding-x-fluid-min)\n      ) /\n      (\n        var(--spx-edit-button-padding-x-fluid-max-w-px) -\n          var(--spx-edit-button-padding-x-fluid-min-w-px)\n      )\n  );--spx-edit-button-padding-x-fluid-y-axis:calc(\n    (\n        (var(--spx-edit-button-padding-x-fluid-min-w-px) * -1) *\n          var(--spx-edit-button-padding-x-fluid-slope)\n      ) + var(--spx-edit-button-padding-x-fluid-min)\n  );padding-left:clamp(var(--spx-edit-button-padding-x-fluid-min) * 1rem, var(--spx-edit-button-padding-x-fluid-y-axis) * 1rem + var(--spx-edit-button-padding-x-fluid-slope) * 100vw, var(--spx-edit-button-padding-x-fluid-max) * 1rem)}:host([styling=default]) .button{padding-right:var(--spx-edit-button-padding-x, 1em 1.2em)}:host([styling=fluid]) .button{--spx-edit-button-padding-x-fluid-min:var(--spx-edit-button-padding-x-min, 1);--spx-edit-button-padding-x-fluid-max:var(--spx-edit-button-padding-x-max, 1.4);--spx-edit-button-padding-x-fluid-min-w-px:calc(\n    var(--spx-fluid-min-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-x-fluid-max-w-px:calc(\n    var(--spx-fluid-max-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-x-fluid-slope:calc(\n    (\n        var(--spx-edit-button-padding-x-fluid-max) -\n          var(--spx-edit-button-padding-x-fluid-min)\n      ) /\n      (\n        var(--spx-edit-button-padding-x-fluid-max-w-px) -\n          var(--spx-edit-button-padding-x-fluid-min-w-px)\n      )\n  );--spx-edit-button-padding-x-fluid-y-axis:calc(\n    (\n        (var(--spx-edit-button-padding-x-fluid-min-w-px) * -1) *\n          var(--spx-edit-button-padding-x-fluid-slope)\n      ) + var(--spx-edit-button-padding-x-fluid-min)\n  );padding-right:clamp(var(--spx-edit-button-padding-x-fluid-min) * 1rem, var(--spx-edit-button-padding-x-fluid-y-axis) * 1rem + var(--spx-edit-button-padding-x-fluid-slope) * 100vw, var(--spx-edit-button-padding-x-fluid-max) * 1rem)}:host([styling=default]) .button{padding-top:var(--spx-edit-button-padding-y, 1em 1.2em)}:host([styling=fluid]) .button{--spx-edit-button-padding-y-fluid-min:var(--spx-edit-button-padding-y-min, 0.7);--spx-edit-button-padding-y-fluid-max:var(--spx-edit-button-padding-y-max, 1.2);--spx-edit-button-padding-y-fluid-min-w-px:calc(\n    var(--spx-fluid-min-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-y-fluid-max-w-px:calc(\n    var(--spx-fluid-max-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-y-fluid-slope:calc(\n    (\n        var(--spx-edit-button-padding-y-fluid-max) -\n          var(--spx-edit-button-padding-y-fluid-min)\n      ) /\n      (\n        var(--spx-edit-button-padding-y-fluid-max-w-px) -\n          var(--spx-edit-button-padding-y-fluid-min-w-px)\n      )\n  );--spx-edit-button-padding-y-fluid-y-axis:calc(\n    (\n        (var(--spx-edit-button-padding-y-fluid-min-w-px) * -1) *\n          var(--spx-edit-button-padding-y-fluid-slope)\n      ) + var(--spx-edit-button-padding-y-fluid-min)\n  );padding-top:clamp(var(--spx-edit-button-padding-y-fluid-min) * 1rem, var(--spx-edit-button-padding-y-fluid-y-axis) * 1rem + var(--spx-edit-button-padding-y-fluid-slope) * 100vw, var(--spx-edit-button-padding-y-fluid-max) * 1rem)}:host([styling=default]) .button{padding-bottom:var(--spx-edit-button-padding-y, 1em 1.2em)}:host([styling=fluid]) .button{--spx-edit-button-padding-y-fluid-min:var(--spx-edit-button-padding-y-min, 0.7);--spx-edit-button-padding-y-fluid-max:var(--spx-edit-button-padding-y-max, 1.2);--spx-edit-button-padding-y-fluid-min-w-px:calc(\n    var(--spx-fluid-min-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-y-fluid-max-w-px:calc(\n    var(--spx-fluid-max-w) / var(--spx-fluid-base)\n  );--spx-edit-button-padding-y-fluid-slope:calc(\n    (\n        var(--spx-edit-button-padding-y-fluid-max) -\n          var(--spx-edit-button-padding-y-fluid-min)\n      ) /\n      (\n        var(--spx-edit-button-padding-y-fluid-max-w-px) -\n          var(--spx-edit-button-padding-y-fluid-min-w-px)\n      )\n  );--spx-edit-button-padding-y-fluid-y-axis:calc(\n    (\n        (var(--spx-edit-button-padding-y-fluid-min-w-px) * -1) *\n          var(--spx-edit-button-padding-y-fluid-slope)\n      ) + var(--spx-edit-button-padding-y-fluid-min)\n  );padding-bottom:clamp(var(--spx-edit-button-padding-y-fluid-min) * 1rem, var(--spx-edit-button-padding-y-fluid-y-axis) * 1rem + var(--spx-edit-button-padding-y-fluid-slope) * 100vw, var(--spx-edit-button-padding-y-fluid-max) * 1rem)}.button:focus{outline:none}.button:focus-visible{outline:none;box-shadow:var(--spx-focus)}:host([styling=default]) .button{padding:var(--spx-edit-button-padding, 1em 1.2em)}.button--discard{color:var(--spx-edit-button-color-discard, #ffffff);background:var(--spx-edit-button-background-discard, var(--spx-color-gray-600))}.loader{display:block;margin-right:var(--spx-edit-button-loader-gap, 0.5em)}";export{x as spx_edit_button}