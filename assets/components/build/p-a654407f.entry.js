import{r as s,c as t,h as i,H as e,a as h}from"./p-d8297fdb.js";import{m as r,b as o,l as a,d,e as n,s as c}from"./p-ae086eeb.js";import{d as m,b as p}from"./p-d099ae82.js";import{c as l}from"./p-70de8434.js";import"./p-a6008498.js";const u="spx-iframe",f=class{constructor(i){s(this,i),this.spxIframeDidLoad=t(this,"spxIframeDidLoad",7),this.display=m,this.documentBorder="none",this.documentBorderRadius="none",this.documentHeight="auto",this.documentWidth="100%",this.loaderBackground="var(--spx-color-gray-900)",this.loaderColor="#ffffff",this.loaderBorderRadius=p,this.minHeight="400px",this.size="1440px",this.src="https://spx.dev",this.type="resize",this.setHeight=()=>{const s=()=>{void 0===this.el.shadowRoot.querySelector("iframe").contentWindow.document.body||null===this.el.shadowRoot.querySelector("iframe").contentWindow.document.body?setTimeout(s,100):this.iframe.style.height=this.el.shadowRoot.querySelector("iframe").contentWindow.document.body.scrollHeight+"px"};s()},this.setUpMutationObserver=()=>{r(this.el.shadowRoot.querySelector("iframe").contentWindow.document.body,{attributes:!0,childList:!0,subtree:!0},(()=>{this.setHeight(),setTimeout((()=>this.setHeight()),500)}))},this.handleResize=()=>{if(this.parent&&this.iframe){const s=this.parent.offsetWidth/this.iframe.offsetWidth;this.iframe.style.transform="scale(calc(("+s+"))",this.parentHeight=this.parent.offsetHeight,this.iframe.style.height=this.parentHeight/s+"px"}},this.createIframeContent=()=>{const s=this.iframe.contentDocument;this.content.querySelectorAll("*").forEach((t=>{s.body.appendChild(t)})),this.content.remove()}}onResize(){"resize"===this.type&&this.handleResize(),this.fit&&this.setHeight()}componentDidLoad(){o({el:this.el}),this.lazy&&new a({unobserve_entered:!0,unobserve_completed:!0,callback_loaded:()=>{setTimeout((()=>{this.fit&&(this.setHeight(),this.setUpMutationObserver()),"resize"===this.type&&this.handleResize()}),10)}},this.el.shadowRoot.querySelectorAll("[data-src]")),"resize"===this.type&&(this.iframe=this.el.shadowRoot.querySelector("iframe"),this.parent=this.el.shadowRoot.querySelector(":scope > div"),this.el.shadowRoot.querySelector("iframe").onload=()=>{this.loaded=!0,this.lazy||this.handleResize()}),"document"===this.type&&this.createIframeContent(),this.fit&&!this.lazy&&(this.setHeight(),this.setUpMutationObserver()),this.spxIframeDidLoad.emit({target:"document"})}componentWillUpdate(){d(this.el)}componentDidUpdate(){"resize"===this.type&&this.handleResize(),"document"===this.type&&this.createIframeContent()}render(){const{css:s}=l(this.el.shadowRoot),t=n({display:c(u,"display",this.display)}),h=s({height:"auto",width:"100%",position:"relative",minHeight:c(u,"min-height",this.minHeight)}),r=s({border:"none",width:this.size,transformOrigin:"left top",position:"absolute",minHeight:c(u,"min-height",this.minHeight)}),o=s({border:c(u,"document-border",this.documentBorder),borderRadius:c(u,"document-border-radius",this.documentBorderRadius),width:c(u,"document-width",this.documentWidth),height:c(u,"document-height",this.documentHeight)}),a="resize"===this.type?r:"document"===this.type&&o,d=s({padding:"0.8em",borderRadius:c(u,"loader-border-radius",this.loaderBorderRadius),backgroundColor:c(u,"loader-background",this.loaderBackground),position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) scale(2)"});return i(e,{class:t},i("div",{class:h},"document"===this.type&&i("div",{ref:s=>this.content=s,innerHTML:this.el.innerHTML}),i("iframe","resize"===this.type?{class:a,ref:s=>this.iframe=s,tabindex:"-1",src:this.lazy?"":this.src,"data-src":this.lazy&&this.src}:{class:a,ref:s=>this.iframe=s,tabindex:"-1"}),"resize"===this.type&&!this.loaded&&i("div",{class:d},i("spx-icon",{type:"loader",color:c(u,"loader-color",this.loaderColor)}))))}get el(){return h(this)}};export{f as spx_iframe}